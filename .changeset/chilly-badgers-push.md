---
'@astrojs/solid-js': major
---

Render SolidJS components using [renderToStringAsync](https://www.solidjs.com/docs/latest#rendertostringasync).

This changes the renderer of SolidJS components from renderToString to renderToStringAsync. It also injected the full SolidJS hydration script generated by `generateHydrationScript`, to help make sure that Suspense, ErrorBoundary and similar features can be hydrated correctly.

The server render phase will now wait for Suspense boundaries to resolve instead of immediately rendering the [Suspense](https://www.solidjs.com/docs/latest#suspense) fallback.

If your SolidJS component uses APIs such as [lazy](https://www.solidjs.com/docs/latest#lazy) or [createResource](https://www.solidjs.com/docs/latest#createresource), these functions may now be used on the server side.

This increases the flexibility of the SolidJS integration. Server-only SolidJS components may now call async functions directly using the `createResource` API, like loading data from another API or using async Astro server functions like `getImage()`. It is very unlikely that a server only component would have used the Suspense feature until now, so this should not be a breaking change for server-only components.

This could be a breaking change for components that meet the following conditions:

- The component uses Suspense APIs like `Suspense`, `lazy` or `createResource`, and
- The component is mounted using a *hydrating* directive:
  - `client:load`
  - `client:idle`
  - `client:visible`
  - `client:media`

These components will now first try to resolve the Suspense boundaries on the server side instead of the client side.

If you do not want Suspense boundaries to be resolved on the server (for example, if you are using createResource to do an HTTP fetch that relies on a browser-side cookie), you may consider:

- changing the template directive to `client:only` to skip server side rendering completely
- use APIs like [isServer](https://www.solidjs.com/docs/latest/api#isserver) or `onMount()` to detect server mode and render a server fallback without using Suspense.
