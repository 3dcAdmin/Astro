---
import Layout from '../layouts/ExamplesLayout.astro'
import templateData from '../components/Examples/function-generate-examples-data.js'
import capitalise from '../components/Examples/function-capitalise.js'
import {Markdown} from 'astro/components'
import CollapsibleReadme from '../components/Examples/CollapsibleReadme.astro'

export async function createCollection(){
    const dataset = await templateData()
    const listOfTemplates = dataset.map((templates)=>(templates.name)) ; 
    return{
        route:'/example/:name',
        paths(){
            return listOfTemplates.map((path)=>({
                params:{
                    name: path
                }
            }))
        },
        async props({params}){
          let example = dataset.filter((example)=>example.name === params.name)
           return{
               name: params.name,
               data: example
           } 
            
        }
    }
}
const {name, data} = Astro.props
const templates =  data.reduce(item=> ({item}))
---
<Layout>
    <div>
        <img src="/default-og-image.png" alt="">
        <h1>{capitalise(templates.name)}</h1>
        </div>
        <CollapsibleReadme label={`Expand ${templates.name} readme`} readme={templates.readme}>
            
        </CollapsibleReadme>
        
</Layout>

