---
// @ts-ignore
import { getImage } from '../dist/index.js';
import { warnForMissingAlt } from './index.js';
import type { ImgHTMLAttributes } from './index.js';
import type { TransformOptions, OutputFormat } from '../dist/index.js';

export interface Props extends TransformOptions, astroHTML.JSX.ImgHTMLAttributes {
	/** Defines an alternative text description of the image. Set to an empty string (alt="") if the image is not a key part of the content (it's decoration or a tracking pixel). */
	alt: string;
}

const { loading = 'lazy', decoding = 'async', ...props } = Astro.props as Props;

if (props.alt === undefined || props.alt === null) {
	warnForMissingAlt();
}

const attrs = await getImage(props);
---

<img {...attrs} {loading} {decoding} />
