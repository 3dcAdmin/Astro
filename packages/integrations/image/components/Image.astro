---
import type { HTMLAttributes } from 'astro/types';
// @ts-ignore
import { getImage } from '../dist/index.js';
import { warnForMissingAlt } from './index.js';
import type { TransformOptions } from '../dist/index.js';

export interface Props extends TransformOptions,
	Omit<HTMLAttributes<'img'>, keyof TransformOptions> { }

const { loading = 'lazy', decoding = 'async', ...props } = Astro.props as Props;

if (props.alt === undefined || props.alt === null) {
	warnForMissingAlt();
}

const attrs = await getImage(props);
---

<img {...attrs} loading={loading} decoding={decoding} />
