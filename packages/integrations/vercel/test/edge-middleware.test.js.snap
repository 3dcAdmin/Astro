// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Serverless prerender build successfully the middleware edge file 1`] = `
"// test/fixtures/middleware/dist/middleware2.mjs
var onRequest = async (context, next) => {
  const response = await next();
  return response;
};

// <stdin>
import { createContext, trySerializeLocals } from \\"astro/middleware\\";
async function middleware(request) {
  const url = new URL(request.url);
  const ctx = createContext({
    request,
    params: {}
  });
  const next = async () => {
    ctx.locals = (({ request: request2 }) => {
      console.log(request2);
      return {
        \\"foo\\": \\"bar\\"
      };
    })({ request });
    const response = await fetch(url, {
      headers: {
        \\"x-astro-locals\\": trySerializeLocals(ctx.locals)
      }
    });
    return response;
  };
  return onRequest(ctx, next);
}
export {
  middleware as default
};
"
`;
