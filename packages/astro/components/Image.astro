---
import type { LocalImageProps, RemoteImageProps } from 'astro:assets';
import { getImage } from 'astro:assets';
import { AstroError, AstroErrorData } from '../dist/core/errors/index.js';

type Props = LocalImageProps | RemoteImageProps;

const { loading = 'lazy', decoding = 'async', ...props } = Astro.props;

if (props.alt === undefined || props.alt === null) {
	throw new AstroError(AstroErrorData.ImageMissingAlt);
}

const attrs = await getImage(props);
---

<img {...attrs} {loading} {decoding} alt={props.alt} />
