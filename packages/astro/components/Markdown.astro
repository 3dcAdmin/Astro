---
import { renderMarkdown } from '@astrojs/markdown-remark';
import stripIndent from 'strip-indent';

export interface Props {
  content?: string;
}

// Internal props that should not be part of the external interface.
interface InternalProps extends Props {
  $scope: string;
}

let { content, $scope } = Astro.props as InternalProps;
let html = null;

// If no content prop provided, use the slot.
if(!content) {
  const renderSlot = (Astro as any).privateRenderSlotDoNotUse;
  content = stripIndent(await renderSlot('default'));
}

const { code: htmlContent } = await renderMarkdown(content, {
  mode: 'md',
  $: {
    scopedClassName: $scope
  }
});

html = htmlContent;
---
{html ? html : <slot />}