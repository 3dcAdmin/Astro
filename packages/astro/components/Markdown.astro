---
export let content: string;
let html = null;

// This flow is only triggered if a user passes `<Markdown content={content} />`
if (content) {
  // @api signals that Snowpack should replace this with an absolute URL to Astro's API handlers
  html = await fetch('@api/render-markdown', {
    method: 'POST',
    headers: {
      'Content-Type': 'text/plain'
    },
    body: content
  }).then(res => res.text());
}
---

// If we have rendered `html` for `content`, render that
// Otherwise, just render the slotted content
{html ? html : <slot />}
