---
import Layout from "../components/Layout.astro"
---
<Layout>
	<h1 id="name">Chaining</h1>
	<a id="click" href="/one">click</a>
</Layout>

<script>
	const t = "[test]"
	document.addEventListener('astro:before-swap', (e) => {
		const originalSwap = e.swap;
		e.swap = () => {
			console.log(t, "6");
			originalSwap();
			console.log(t, "1");
		}
	})

	document.addEventListener('astro:before-swap', (e) => {
		e.swapper.extend({
			swapRootAttributes(doc, originalSwapRootAttributes) {
				console.log(t, "4");
				originalSwapRootAttributes(doc);
				console.log(t, "3");
			}
		})
	})

	document.addEventListener('astro:before-swap', (e) => {
		const originalSwap = e.swap;
		e.swap = () => {
			console.log(t, "7");
			originalSwap();
			console.log(t, "0");
		}
	})

	document.addEventListener('astro:before-swap', (e) => {
		e.swapper.extend({
			swapRootAttributes(doc, originalSwapRootAttributes) {
				console.log(t, "5");
				originalSwapRootAttributes(doc);
				console.log(t, "2");
			}
		})
	})

</script>
