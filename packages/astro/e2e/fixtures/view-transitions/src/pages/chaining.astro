---
import Layout from "../components/Layout.astro"
---
<Layout>
	<h1 id="name">Chaining</h1>
	<a id="click" href="/chaining2">click</a>
</Layout>

<script>
import { builtInSwap } from "../../node_modules/astro/dist/transitions/swap-steps";

	const t = "[test]"

	document.addEventListener('astro:before-swap', (e) => {
		e.swap = () => builtInSwap.extended(e.newDocument)
	})

	document.addEventListener('astro:before-swap', (e) => {
		const originalSwap = e.swap;
		e.swap = () => {
			console.log(t, "99");
			originalSwap();
			console.log(t, "00");
		}
	})

	document.addEventListener('astro:before-swap', (e) => {
		e.swap = () => builtInSwap.extended(e.newDocument)
	})

	document.addEventListener('astro:before-swap', (e) => {
		const originalSwap = e.swap;
		e.swap = () => {
			console.log(t, "5");
			originalSwap();
			console.log(t, "0");
		}
	})

	builtInSwap.extend({
		swapRootAttributes(doc, originalSwapRootAttributes) {
			console.log(t, "3");
			originalSwapRootAttributes(doc);
			console.log(t, "2");
		}
	})

	builtInSwap.extend({
		swapRootAttributes(doc, originalSwapRootAttributes) {
			console.log(t, "4");
			originalSwapRootAttributes(doc);
			console.log(t, "1");
		}
	})

</script>
