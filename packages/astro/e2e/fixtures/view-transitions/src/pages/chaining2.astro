---
import Layout from "../components/Layout.astro"
---
<Layout>
	<h1 id="name">Chaining2</h1>
	<a id="click" href="/one">click</a>
</Layout>

<script>
import { builtInSwap } from "../../node_modules/astro/dist/transitions/swap-steps";

	const t = "[test]"

	document.addEventListener('astro:before-swap', (e) => {
		e.swap = () => builtInSwap.extended(e.newDocument)
	})


	builtInSwap.extend({
		swapRootAttributes(doc, originalSwapRootAttributes) {
			console.log(t, "d");
			originalSwapRootAttributes(doc);
			console.log(t, "e");
		},
		deselectScripts(doc, originalDeselectScripts) {
			console.log(t, "a");
			originalDeselectScripts(doc);
			console.log(t, "b");
		}
	})

	builtInSwap.extend({
		swapRootAttributes(doc, originalSwapRootAttributes) {
			console.log(t, "c");
			originalSwapRootAttributes(doc);
			console.log(t, "f");
		}
	})

</script>
